<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opticar - Análise de Dados</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="assets/styles/monitoramentoGestao Fabrica.css">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/images/logoOpticar.png">

    <!-- Bibliotecas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="dashHistorica">
        <div id="div_menu" class="menu ">
            <div class="nav-burger" onclick="expand()">
                <div id="linha1"></div>
                <div id="linha2"></div>
                <div id="linha3"></div>
            </div>

            <!-- <ul class="nav-links oculta">
                <li><i class='bx bx-desktop' style='color:#ffffff' ></i></li>
                <li><i class='bx bxs-bell-ring' style='color:#ffffff' ></i></li>
                <li><i class='bx bx-server' style='color:#ffffff' ></i></li>
            </ul> -->
            <ul id="ul_links" class="nav-links ">

            </ul>
        </div>
    </div>

    <div class="dashgestao">
        <!-- Cabeçalho -->
        <div class="cabecalho">
            <div class="empresa">

                <i class='bx bxs-business'></i>

                <div class="txtInfo">
                    <p id="empresaNome">Nissan</p>

                </div>
            </div>

            <div class="perfil">
                <i class='bx bxs-user-circle' style="font-size: 4vw;"></i>
                <div class="txtInfo">
                    <div class="txt">
                        <p id="usuarioNome">Jonhis Bringous</p>
                        <p class="endereco" id="usuarioEmail"> jonhis@gmail.com</p>
                    </div>
                    <i class='bx bx-chevron-down' style="font-size: 3vw;"></i>
                </div>
            </div>
        </div>

        <!-- Painel de Dashboards -->
        <div class="painelDash">
            <div class="cabecalhoDash">
                <div class="texto">
                    <p id="titulo">Dashboards Gestão da Fábrica</p>
                    <p class="descricao">Acompanhe o que há de mais importante na sua fábrica</p>
                </div>
            </div>

            <div class="grafSuperior">

                <!-- KPI de servidores -->
                <div class="chart-container-blue">
                    <div class="chartCabecalho">
                        <h2><i class='bx bx-server' style="border: solid 1px white; border-radius: 8px;"></i>
                            Servidores:</h2>
                        <div class="filtrar" onclick="window.location.href='listadeservidores.html'">
                            <h3>Visualizar:</h3>
                            <div class="iconeFiltro">
                                <i class='bx bx-show'></i>
                            </div>
                        </div>
                    </div>

                    <div class="server-container">
                        <div class="server-box">
                            <span class="server-label">Ativos</span>
                            <span id="qtd-servidores" class="server-value" style="color: rgb(3, 116, 7);"></span>
                        </div>
                    </div>
                </div>

                <!-- KPI de efetividade -->
                <div class="chart-container-blue">
                    <div class="chartCabecalho">
                        <h2><i class='bx bxs-save' style="border: solid 1px white; border-radius: 8px;"></i> Efetividade
                            na resolução de alertas:</h2>
                    </div>

                    <div class="kpi-box">
                        <div class="kpi-valores" id="eficienciaGeral">--%</div>
                        <div class="kpi-detalhes">
                            <p>Nos graves: <span id="eficienciaGraves">--%</span></p>
                            <p>Nos moderados: <span id="eficienciaModerados">--%</span></p>
                        </div>
                    </div>
                </div>

                <!-- Gráfico de funcionários -->
                <div class="chart-container-bluefuncionarios">
                    <div class="chartCabecalho">
                        <h2><i class='bx bx-user-circle' style="color:#ffffff"></i> Funcionários:</h2>

                        <div class="filtrar" onclick="window.location.href='funcionarios.html'">
                            <h3>Adicionar:</h3>
                            <div class="iconeFiltro">
                                <i class='bx bx-plus-circle' style="color: #ffffff;"></i>
                            </div>
                        </div>
                    </div>

                    <div class="cargos">
                        <span id="totalCargos"></span>
                        <canvas id="graficoCargos" width="900" height="600"></canvas>
                    </div>
                </div>

            </div>

            <!-- Gráficos inferiores -->
            <div class="graficos-inferior">
                <div class="pesquisa">
                    <div class="kpi-seletor-componente">
                        <label for="seletorComponente">Selecione o Componente:</label>
                        <select id="seletorComponente">
                            <option value="cpu">escolher</option>
                            <option value="cpu">CPU</option>
                            <option value="ram">RAM</option>
                            <option value="disco">Disco</option>
                        </select>
                    </div>

                    <div class="kpi-problema-componente">
                        <h3>Servidores com componente<br>Debilitado</h3>
                        <span id="quantidadeProblemas">--</span>
                        <button class="botao-olho" title="Ver detalhes">
                            <i class='bx bx-show'></i>
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Scripts locais -->
    <script src="/assets/Scripts/backlistadeservidores.js"></script>
    <script src="/assets/Scripts/dashsEstaticasFabrica/compdebili.js"></script>
    <script src="/assets/Scripts/dashsEstaticasFabrica/funcionarioscontagem.js"></script>
    <script src="/assets/Scripts/dashsEstaticasFabrica/eficiencia.js"></script>

    <!-- Scripts da própria página -->
    <script>
        // Barra lateral
        function expand() {
            if (div_menu.classList.contains('menu-expand')) {
                div_menu.style.animation = 'diminui 0.2s linear'
            } else {
                div_menu.style.animation = 'expandir 0.2s linear'
            }
            div_menu.classList.toggle('menu-expand')
            ul_links.classList.toggle('nav-links-expanded')
        }

        // Visualizar os servidores (não está sendo usado no HTML mas deixei aqui)
        function verServidores() {
            window.location.href = "listadeservidores.html"
        }

        // Preencher a quantidade de servidores
        document.addEventListener("DOMContentLoaded", () => {
            const quantidadeServidores = sessionStorage.getItem("quantidadeServidores")
            if (quantidadeServidores !== null) {
                document.getElementById("qtd-servidores").innerText = quantidadeServidores
            }
        });
    </script>

</body>

</html>

<script>
    // BARRA LATERAL
    function expand() {
        if (div_menu.classList.contains('menu-expand')) {
            div_menu.style.animation = 'diminui 0.2s linear'

        } else {
            div_menu.style.animation = 'expandir 0.2s linear'

        }
        div_menu.classList.toggle('menu-expand')
        ul_links.classList.toggle('nav-links-expanded')
    }

    function verServidores() {
        window.location.href = "lista de servidores.html"

    }

</script>